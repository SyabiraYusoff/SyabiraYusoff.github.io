<nav class="breadcrumb">
    <button onclick="loadHome()"><i class="fa fa-fw fa-home"></i> Home</button>
    <span>&rsaquo;</span>
    <button onclick="loadStep('step2')"> Files Upload</button>
    <span>&rsaquo;</span>
    <button onclick="loadSection('step2_CLI_(MacOS)')" style="color:darkgrey">Command Line Interface Upload MacOS</button>
</nav>
<div id="topPage"></div>
<div class="fab-container">
    <div class="button iconbutton" onclick="loadStep('feedback')">
        <span>Share your feedback</span>
    </div>
</div>
<h2>Command Line Interface Upload (MacOS/LINUX)</h2>
            <div class="notice">
                There are TWO main steps to setup your file upload through Command Line Interface (CLI). 
                <ul>
                    <li>Generate API endpoint and Authentication Token on Velsera.</li>
                    <li>Configure CLI using Windows/LINUX/Mac</li>
                </ul>
            </div>
            
            <div class="card" style="background-color: #f1f1f1;">
                <h3>Generate API endpoint and Authentication Token on Velsera</h3>
                Below are the steps to generate API Endpoint and Authentication Token: <br>
                <ol>
                    <li>Log in to your Seven Bridges account. Click <mark>Developer</mark> -> <mark>Authentication token</mark> -> <mark>Generate token</mark>.</li><br>

                    <img class="steps-img" src="assets/images/autehnticationstep1.png"><br><br>
                    <li>You will find the Token and API on the next page.Ensure to keep your Authentication Token secure and do not share it publicly.</li>
                    <li>You may now use these credentials while setting up your upload process to authenticate and interact with Seven Bridges through the API.</li>
                    <li>Picture below showing the API and Authentication Token:</li>
                    <br><img class="steps-img" src="assets/images/authenticationTokenStep2.png"><br>

                </ol>
            </div>
            <div class="card">
                <h3>Download and Configure CLI to your device</h3>
                <ol>
                    <li>To automatically download the SB command line interface, type or paste the command below:
                        <p class="code">bash -c 'curl https://igor.sbgenomics.com/downloads/sb/install.sh -sSf | sudo -H sh'</p> </li>
                    <li>You may be prompted to input your device password then press <mark>enter</mark>.</li>
                    <li> If the tool is successfully installed, the below message will be printed out.<br>

                    <img class="steps-img" src="assets/images/CLI_successfull.png"></li>

                    <p><b>CLI Configuration</b></p>
                    <li>To authenticate your credential with the SB platform, launch the shell promt/terminal and enter:<br>
                    <p class="code">sb configure</p></li>
                    <li>The prompt will ask for the API endpoint and authentication token. Enter accordingly.</li>
                    <li>Enter the command below and it should display the output:<br>
                        <p class="code">sb</p>

                    <img class="steps-img" src="assets/images/sbCommandOutput.png"></li>

                </ol>
            </div>

           <div class="card">
                <h3>File Integrity Checks</h3>
                <p>It is recommended to check your file integrity before upload to Velsera platform. Files that are corrupted, as an example FASTQ files would caused the pipeline failure.</p>
                    <ol>
                        <li>Navigate to the folder contain your project files using command line or terminal.</li>
                        <p>If unsure, please refer to the video below (MacOS user). If using Linux, please see the link <a href="https://opensource.com/article/21/8/navigate-linux-directories">here</a> on how to navigate to your project folder.</p>
                            <div class="video-container" >

                            <video style="width: 500px;" controls poster = "assets/videos/MacOS_navigateFolder.png">
                            <source src="assets/videos/web_navigatetoFolder.mov" type="video/mp4"></video></div>

                            <li>To get the directory path of your files, type command below: <p class="code">pwd</p></li>
                        <li>Enter command below to view the files available in current directory. <p class="code">ls</p></li>
                        <li>To check file integrity, enter the command below in your console: <p class="code">gunzip --test --verbose filename.fastq.gz</p>
                        <p>Please make sure to change the <mark>filename.fastq.gz</mark> to your own file name.</p></li>
                        <li>To test more files, add a space between fastq files. Example code below: 
                            <p class="code">gunzip --test --verbose filename1.fastq.gz filename2.fastq.gz filename3.fastq.gz</p>
                        </li>
                        <li>Once completed, the output for intact files would be "OK". If the file is corrupted, especially CRC error, please re-download the file from source and test again. </li>
                        <div class="video-container" >

                            <video style="width: 500px;" controls poster = "assets/videos/FIleIntegrityCheck.png">
                            <source src="assets/videos/integrityChecks.mov" type="video/mp4"></video></div>

            </ol>
            </div>

            <div class="card" style="background-color: #f1f1f1;">
                <h3>File Upload</h3>
                <ol>
                    <li>Suppose the files are located in the Download folder. Copy and paste the following command to navigate to the Download folder:<br><p class="code">cd ~/Download</p></li>
                    <li>To upload the files, enter command below:
                        <p class="code">sb upload start path_to_file_to_upload --destination</p></li>
                        <p>The <mark>--destination</mark> input string can be found on the link of your project on Seven Bridges.<br> Example: <mark>https://igor.sbgenomics.com/u/biox_support_emea/demo-project</mark>. Please use <mark>biox_support_emea/demo-project</mark> as the input for --destination flag on the command line. </p>
                        
                        <li>To find out more information about this tool, please copy and paste the link below to your browser.<br>
                        <p class="code">https://docs.sevenbridges.com/docs/upload-via-the-command-line </p></li>
                        <li>If you need to resume the upload, It is possible with the following command.<br><p class="code">sb upload resume your_file_to_upload</p></li>
                </ol>
            </div>

            <div class="card">
                <h3>CLI Configuration and File Upload</h3>
                <div class="video-container" >

                    <video style="width: 500px;" controls poster = "assets/videos/sbConfigure_FileUpload.png">
                    <source src="assets/videos/sbConfigure_FileUpload.mov" type="video/mp4"></video></div>

            </div>

            <div class="scroll-top">
                <button><a href="#topPage">Scroll to top page</a></button>
            </div>